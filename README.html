<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta name="generator" content=
    "HTML Tidy for Linux/x86 (vers 1st September 2002), see www.w3.org">
    <title>RMagick MAJOR.MINOR.TEENY README</title>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quanta Plus">
  </head>
  <body>
    <div align="center">
      <h1>RMagick MAJOR.MINOR.TEENY</h1>
      <h2>README</h2>
      <h4>YY/MM/DD</h4>
    </div>
    <h2>Table of Contents</h2>
    <ul>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#contact_information">Contact
      information</a></li>
      <li><a href="#prerequisites">Prerequisites</a></li>
      <li><a href="#tips">Tips for installing and configuring
      ImageMagick and GraphicsMagick</a></li>
      <li><a href="#installing_rmagick">Installing RMagick</a></li>
      <li>
        <ul>
          <li><a href="#configuration_options">Configuration
          options</a></li>
          <li><a href="#running">Running the configure and make
          scripts</a></li>
        </ul>
      </li>
      <li><a href="#things_that_can_go_wrong">Things that can go
      wrong</a></li>
      <li><a href="#upgrading">Upgrading</a></li>
      <li><a href="#more_samples">More samples</a></li>
      <li><a href="#undocumented_features">Undocumented
      features</a></li>
      <li><a href="#known_issues">Known issues</a></li>
      <li><a href="#reporting_bugs">Reporting bugs</a></li>
      <li><a href="#credits">Credits</a></li>
      <li><a href="#license">License</a></li>
    </ul>
    <h2><a name="introduction">Introduction</a></h2>
    <p>RMagick is an interface between the Ruby programming
    language and the ImageMagick and GraphicsMagick image
    processing libraries.</p>
    <h2><a name="contact_information">Contact Information</a></h2>
    <b>Author:</b>&nbsp;Tim Hunter<br>
     <b>Email:</b>&nbsp;<a href=
    "mailto:cyclists@nc.rr.com?subject=RMagick%20Feedback">cyclists@nc.rr.com</a>
    
    <h2><a name="prerequisites">Prerequisites</a></h2>
    <dl>
        <dt><b>O/S</b></dt>
        <dd>Linux, Sun Solaris, Cygwin, FreeBSD. RMagick does not run on MS Windows
    except with Cygwin.</dd>
        <dt><b>Ruby</b></dt>
        <dd>Ruby 1.6.7 or later. You can get Ruby from
            <a href="http://www.ruby-lang.org">www.ruby-lang.org</a></dd>
    </dl>
    One of
    <dl>
        <dt><b>ImageMagick</b></dt>
        <dd>ImageMagick 5.5.1 or later. You can get ImageMagick
        from <a href="http://www.imagemagick.org">www.imagemagick.org</a>.</dd>
        <dt><b>GraphicsMagick</b></dt>
        <dd>GraphicsMagick is a friendly fork of ImageMagick 5.5.1.
        You can get GraphicsMagick from <a href="http://www.graphicsmagick.org">www.graphicsmagick.org</a>.</dd>
    </dl>
    <p>You only need one of ImageMagick or GraphicsMagick. RMagick
    works equally well with both.</p>
    <h2><a name="tips">Tips for installing and configuring
    ImageMagick and GraphicsMagick</a></h2>
    <p>If you have never installed ImageMagick or GraphicsMagick
    before, I strongly encourage you to install the newest version
    of your choice from source. I also strongly encourage you to
    read the README.txt file as many times as is necessary for you
    to understand how to configure it. ImageMagick and
    GraphicsMagick are large and complicated programs and can be
    difficult to configure. Follow these tips to minimize the
    amount of time you'll spend and your frustration level.</p>
    <p>Do <i>not</i> simply type ./configure and expect the
    defaults to be correct for you. Through version 5.5.7, by
    default, ImageMagick is configured to use a color depth
    ("quantum-depth") of 16. Unless you have very special image
    processing needs you should use the --with-quantum-depth=8
    option. This will cause ImageMagick run faster and use half as
    much memory. If you need to use 16 as the color depth, you'll
    know it.</p>
    <p>GraphicsMagick defaults to a color depth of 8, so you need
    do nothing.</p>
    <p>Since you are installing ImageMagick/GraphicsMagick to use
    with Ruby, consider whether you want to skip
    ImageMagick's/GraphicMagicks' support for Perl and C++ by using
    the --without-perl and --without-magick-plus-plus options.
    Doing so will speed up the installation process and save some
    disk space.</p>
    <p>Determine which image formats you are interested in using
    and make sure that you have installed the libraries that
    ImageMagick/GraphicsMagick uses to process these formats.
    ImageMagick and GraphicsMagick use additional libraries to
    support some image formats. If you do not install those
    libraries you cannot read and write those image formats. You
    will need to configure ImageMagick/GraphicsMagick to support
    the JPG, PNG, TIFF, and WMF formats in order to execute all the
    RMagick sample programs. See ImageMagick's or GraphicMagick's
    README.txt file for more information.</p>
    <p>You will almost certainly want to specify the
    --enable-shared and --disable-static options.</p>
    <p>Once you have determined the configuration options you need,
    run the configure script. When it completes, read the summary
    output to see if configuration worked the way you expected.
    Here's an example of the summary output from ImageMagick's
    configure script. Notice that the result of each option is
    listed in the "Configured value" column.</p>
<pre>
Option            Configure option              Configured value
-----------------------------------------------------------------
Shared libraries  --enable-shared=yes           yes
Static libraries  --enable-static=no            no
GNU ld            --with-gnu-ld=yes             yes
LZW support       --enable-lzw=no               no
Quantum depth     --with-quantum-depth=8        8
Delegate Configuration:
BZLIB             --with-bzlib=yes              yes
DPS               --with-dps=yes                no (failed tests)
FlashPIX          --with-fpx=yes                no
FreeType 2.0      --with-ttf=yes                yes
Ghostscript       None                          /usr/bin/gs
Ghostscript fonts --with-gs-font-dir=default    /usr/share/fonts/default/Type1/
Ghostscript lib   --with-gslib=no               no
JBIG              --with-jbig=yes               no
JPEG v1           --with-jpeg=yes               yes
JPEG-2000         --with-jp2=yes                no
LCMS              --with-lcms=yes               yes
Magick++          --with-magick-plus-plus=no    no
PERL              --with-perl=no                no
PNG               --with-png=yes                yes
TIFF              --with-tiff=yes               yes
Windows fonts     --with-windows-font-dir=/mnt/windows/windows/fonts    /mnt/windows/windows/fonts/
WMF               --with-wmf=yes                yes
X11               --with-x=                     yes
XML               --with-xml=yes                yes
ZLIB              --with-zlib=yes               yes
X11 Configuration:
  X_CFLAGS     = -I/usr/X11R6/include
  X_PRE_LIBS   = -lSM -lICE
  X_LIBS       = -L/usr/X11R6/lib
  X_EXTRA_LIBS =
</pre>
    <p>If the results are not what you wanted, install any missing
    libraries, choose new or different options, or whatever it
    takes, erase the config.cache file, and re-run configure.
    Repeat as often as necessary before moving to the `make' and
    `make install' steps.</p>
    <p>Detailed information about all of ImageMagick's and
    GraphicsMagick's configuration options may be found in their
    README.txt and INSTALL.txt files.</p>
    <h4>Windows Metafile Format</h4>
    <p>As noted in the ImageMagick and GraphicsMagick README.txt
    files, to support images in the Windows Metafile format,
    ImageMagick/GraphicsMagick requires an additional library.
    Without this library some of the RMagick sample programs will
    not work. ImageMagick and GraphicsMagick require libwmf 0.2.5,
    0.2.7, or 0.2.2 to support the WMF format. (Avoid libwmf
    0.2.6!)</p>
    <h2><a name="installing_rmagick">Installing RMagick</a></h2>
    <p>Installing RMagick is much simpler than installing
    ImageMagick or GraphicsMagick. Note that the <i>make</i> step
    runs all the example programs. This process both builds the
    example images used in the documentation and validates your
    RMagick installation. This step can take 5-15 minutes depending
    on the speed of your computer.</p>
    <h4><a name="configuration_options">Configuration
    options</a></h4>
    <p>Type <code>./configure --help</code> to see a list of
    configuration options. In addition to the regular options,
    there are a few RMagick-specific options:</p>
    <dl>
      <dt>--with-imdoc-base-uri=uri</dt>
      <dd>
        <p>During installation, all links in the RMagick
        documentation that link to the ImageMagick or
        GraphicsMagick web site are replaced with links to your
        local copies of the documentation. If you want to
        specify a different location, use the --with-imdoc-base-uri
        option during the config step to specify a different base
        URI for the links. By default, the base URI is
        "file:///$prefix/share/****Magick" (where $prefix is the
        prefix you used when you installed ImageMagick or
        GraphicsMagick). If the configure script doesn't find the
        documentation in the default directory it will use
        "http://www.imagemagick.org" or
        "http://www.graphicsmagick.org". For example,</p>
<pre>
./configure --with-imdoc-base-uri=file:///home/user/ImageMagick
</pre>
      <p><i>Cygwin tip:</i>&nbsp;&nbsp;Use this option to specify
      a Windows folder as the documentation base URI. Otherwise
      the URI will refer to the Cygwin file system and Internet Explorer won't
      be able to find the files. For example, suppose C:\CYGWIN is
      mounted to / and you installed the
      ImageMagick documentation in /usr/local/share/ImageMagick. Specify
      </p>
<pre>
./configure --with-imdoc-base-uri=file://C:\cygwin\usr\local\share\ImageMagick
</pre>
      </dd>
      <dt>--with-doc-dir=directory</dt>
      <dd>
        Specify the directory to install the RMagick documentation.
        By default this is $prefix/share/RMagick, where $prefix is
        the prefix specified by --prefix. For example, to install
        the documentation in /home/user/RMagick, specify:
<pre>
./configure --with-doc-dir=/home/user/RMagick
</pre>
      </dd>
      <dt>--enable-allow-example-errors</dt>
      <dd>Normally the documentation installation terminates if 5
      examples fail. If you use this option, the installation does
      not check for failing examples and will always complete. This
      option is useful if you're having trouble installing RMagick
      and you want to see all the failing examples.</dd>
    </dl>
    <br>

    <h4><a name="running">Running the <code>configure</code> and
    <code>make</code> scripts</a></h4>
    <p>De-compress the RMagick-MAJOR.MINOR.TEENY.tar.gz archive and
    enter the top directory. Then type:</p>
<pre>
    $ ./configure &lt;configuration options&gt;
    $ make
   ($ su)
    $ make install
   (optionally)
    $ make clean
</pre>
    <h2><a name="things_that_can_go_wrong">Things that can go
    wrong</a></h2>
    <dl>
      <dt><b>Cannot open shared object file</b></dt>
      <dd>
        <p>When <code>make</code> is running the examples, if you get
        a message like this:</p>
<pre>
/home/you/RMagick-MAJOR.MINOR.TEENY/lib/RMagick.rb:11:in `require': libMagick.so.0:
  cannot open shared object file: No such file or directory -
  /home/you/RMagick-MAJOR.MINOR.TEENY/ext/RMagick/RMagick.so (LoadError)
</pre>
        <p>you probably do not have the directory in which the
        ImageMagick or GraphicsMagick library is installed in your
        load path. An easy way to fix this is to define the
        directory in the LD_LIBRARY_PATH environment variable. For
        example, suppose you installed the GraphicsMagick library
        libGraphicsMagick.so in /usr/local/lib. (By default this is
        where it is installed.) Create the LD_LIBRARY_PATH variable
        like this:</p>
<pre>
export LD_LIBRARY_PATH=/usr/local/lib
</pre>
        <p>On Linux, see <code>ld(1)</code> and
        <code>ld.so(8)</code> for more information. On other
        operating systems, see the documentation for the dynamic
        loading facility.</p>
      </dd>
      <dt><b>No such file or directory -
      "/tmp/rmagick6872.6"</b></dt>
      <dd>
        <p>When <code>make</code> is running the examples, if you get
        a message like this:</p>
<pre>
hook /home/me/src/RMagick-MAJOR.MINOR.TEENY/./post-setup.rb failed:
No such file or directory - "/tmp/rmagick6872.6"
</pre>
        <p>you probably do not have a temporary directory
        environment variable set. Set the TMPDIR environment
        variable to your temporary directory. For example:</p>
<pre>
export TMPDIR=/home/me/tmp
</pre>
      </dd>
    </dl>
    <h2><a name="upgrading">Upgrading</a></h2>
    <p>If you upgrade to a newer release of ImageMagick or
    GraphicsMagick, make sure you're using a release of RMagick
    that supports that release. Usually I put out a new release of
    RMagick with every new release of ImageMagick. It's safe to
    install a newer release of RMagick over an earlier release.</p>
    <h2>More samples</h2>
    <p>You can find more sample RMagick programs in the /example
    directory. These programs are not installed in the RMagick
    documentation tree.</p>
    <h2><a name="undocumented_features">Undocumented
    features</a></h2>
    <p>This release includes an extra feature that isn't in the
    documentation. The Magick module defines two methods that
    control ImageMagick's logging function. This function is not
    officially documented by ImageMagick, so I have decided not to
    add them to RMagick's documentation. However, you may find them
    helpful for debugging your application. (Caveat: these two
    methods may change behavior or be removed without advance
    notice! You are on your own!)</p>
    <p><i>Magick::set_log_event_mask(event [,...]) -&gt;
    Magick</i></p>
    <p>The arguments are one or more "event domains". The
    set_log_event_mask method recognizes these event domains:
    "all", "annotate", "blob", "cache", "coder", "configure",
    "deprecate", "draw", "locale", "none", "resource", "transform", "user",
    and "x11". ImageMagick events that match the mask are logged.
    The default domain is "none". For example,</p>
<pre>
          Magick::set_log_event_mask("render")
       
</pre>
    <p>Logging is controlled by the log.mgk file, which may be
    found in the same directory as the delegates.mgk files. (See
    ImageMagick's README.txt file.) The purpose of the entries in
    this file is undocumented, so your guess is as good as mine.
    Also, the meaning of the event domains and exactly what events
    are logged are undocumented.</p>
    <p><i>Magick::set_log_format(format) -&gt; Magick</i></p>
    <p>The default log format is described in the log.mgk file.
    This method allows you to redefine the format at run-time. The
    format argument is a string similar to an fprintf format
    string. Each line in the log has the format described by the
    format string. Characters that are not control characters are
    printed as-is. The control characters are:</p>
<pre>
         %t - the current time
         %r - the elapsed time
         %u - the user time
         %p - the pid (process id)
         %m - the name of the ImageMagick source file that contains the
              function that generated the event
         %f - the name of the ImageMagick function that generated the
              event
         %l - the line number in the source file
         %d - the event domain (one of the event mask strings listed above)
         %e - the event name
</pre>
    <p>For example, the default log format is:</p>
<pre>
         Magick::set_log_format("%t %r %u %p %m/%f/%l/%d:\n  %e")
</pre>
    <h2><a name="known_issues">Known issues</a></h2>
    <ol>
      <li>
        gcc 3.2, during the "install.rb setup" step, issues the
        warning: 
<pre>
cc1: warning: changing search order for system directory "/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
</pre>
        This does not indicate a problem.
      </li>
    </ol>
    <h2><a name="reporting_bugs">Reporting bugs</a></h2>
    <p>Please report bugs in RMagick, its documentation, or its
    installation programs to me at <a href=
    "mailto:cyclists@nc.rr.com?subject=RMagick%20bug%20report">cyclists@nc.rr.com</a>.
    However, I cannot help with Ruby installation and configuration
    or ImageMagick or GraphicsMagick installation and
    configuration. Please report problems with that software to
    their respective authors or distributors.</p>
    <h2><a name="credits">Credits</a></h2>
    <p>Thanks to</p>
    <ul>
      <li>Akinori MUSHA, for his work making RMagick available on
      FreeBSD</li>
      <li>Tom Payne, for reporting bugs, sending me the Ruby 1.8.0
      patches, and for the Gentoo ebuild</li>
      <li>Bob Friesenhahn, for helping with the GraphicsMagick
      support and in many other ways</li>
      <li>
        Simple Systems, for hosting the RMagick documentation online.
      </li>
      <li>Mike Williams, for the RMagick Debian package</li>
    </ul>
    <h2><a name="license">License</a></h2>

      <div style="padding: 1em; margin-left: 5%; margin-right: 5%; background-color: #dcdcdc">

      <p>Copyright &copy; 2003 by Timothy P. Hunter</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
</p>


<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>



<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>     </div>
    <div align="center" style="padding: 3em">
    <table>
    <tr>
    <td>
    <a href="http://www.opensource.org/docs/definition.php">
    <img src="http://www.opensource.org/trademarks/osi-certified/web/osi-certified-60x50.gif"
    border="0" width="60" height="50"></a>
    <td align="center">
    <p><strong>This software is OSI Certified Open Source Software.<br>
OSI Certified is a certification mark of the Open Source Initiative.</strong></p>
    </td></tr></table>
    </div>
  </body>
</html>
